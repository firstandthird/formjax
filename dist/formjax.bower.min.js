/*!
 * formjax - Submit a form via ajax
 * v0.0.1
 * 
 * copyright First+Third 2014
 * MIT License
*/
!function(a){a.declare("formjax",{defaults:{submitButton:"[type=submit]",progressClass:"btn-progress",successClass:"btn-success",errorClass:"btn-error",progressText:"Sending...",successText:"Done!",errorText:"Uh oh",validate:function(){return!0},success:function(){},error:function(){}},events:{submit:"submit"},init:function(){this.button=this.el.find(this.submitButton)},submit:function(b){b.preventDefault(),this.validate()&&(this.button.addClass(this.progressClass).val(this.progressText),a.post(this.el.attr("action"),this.el.serialize()).done(this.proxy(this._success)).fail(this.proxy(this._error)))},_success:function(a){this.button.removeClass(this.progressClass).addClass(this.successClass).val(this.successText),this.emit("ajaxify:success",a),this.success.call(this.el,a)},_error:function(b){this.button.removeClass(this.progressClass).addClass(this.errorClass).val(this.errorText),a.notice(b.responseJSON.message,{level:"error"}),this.emit("ajaxify:error",b),this.error.call(this.el,b)}})}(jQuery);